<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Test</title>
</head>
<body>
	<div id="mocha"></div>

	<input id="tags">
	<script src="mocha/mocha.js"></script>
	<script src="proclaim/lib/proclaim.js"></script>
	<script src="async-define/async-define.js"></script>
	<script src="events-amd/events-amd.js"></script>
	<script src="doc-amd/doc.js"></script>
	<script src="tag.js"></script>

	<script>
		const assert = proclaim;
		mocha.ui('bdd');

		define(['doc', 'tag'], function($, tag) {
			describe('Tagify method', function() {
				it('should create a single tag from a filled input', function() {
					$('#tags').val('tag1');
					const tagged = tag.tagify('#tags');
					const tags = tagged.tags();
					assert.include(tags, 'tag1');
					assert.lengthEquals(tags, 1);
				});
				it('should create two tags from a filled input, splitted with comma', function() {
					$('#tags').val('tag1,another-tag');
					const tagged = tag.tagify('#tags');
					const tags = tagged.tags();
					assert.include(tags, 'tag1');
					assert.include(tags, 'another-tag');
					assert.lengthEquals(tags, 2);
				});
				it('should create two tags from a filled input, splitted with a spaced comma', function() {
					$('#tags').val('tag1, another-tag');
					const tagged = tag.tagify('#tags');
					const tags = tagged.tags();
					assert.include(tags, 'tag1');
					assert.include(tags, 'another-tag');
					assert.lengthEquals(tags, 2);
				});
				it('should create two tags from a filled input, one of them with spaces, splitted with a spaced comma', function() {
					$('#tags').val('tag1, another tag');
					const tagged = tag.tagify('#tags');
					const tags = tagged.tags();
					assert.include(tags, 'tag1');
					assert.include(tags, 'another tag');
					assert.lengthEquals(tags, 2);
				});
				it('should create some tags from a filled input, removing empty tags', function() {
					$('#tags').val('tag1, another tag, tag2,, another another , ,');
					const tagged = tag.tagify('#tags');
					const tags = tagged.tags();
					assert.include(tags, 'tag1');
					assert.include(tags, 'another tag');
					assert.include(tags, 'tag2');
					assert.include(tags, 'another another');
					assert.lengthEquals(tags, 4);
				});
			})
		});
	</script>

	<script>
		if (window.mochaPhantomJS) {
			mochaPhantomJS.run();
		} else {
			mocha.run();
		}
	</script>
</body>
</html>
